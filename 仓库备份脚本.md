太好了 ✅，下面是你要的**一键式 GitHub 仓库备份脚本**，支持以下功能：

---

## ✅ 脚本功能一览：

* 输入：一个 `repos.txt`，列出你要备份的多个仓库（格式：`owner/repo`）
* 自动执行：

  * `git clone` 代码
  * 使用 `github-backup` 备份：

    * issues
    * issue 评论
    * pull requests（含评论 / 提交 / 详情）
    * wiki
    * releases
    * assets
* 输出：全部保存到 `./backup/<repo>/` 目录中

---

## 📂 目录结构建议：

```
your-backup-folder/
├── .env                 # 放 GitHub token
├── repos.txt            # 仓库列表，一行一个 owner/repo
└── github_backup.sh     # 脚本本体
```

---

## 📄 1. `.env` 示例：

```dotenv
GITHUB_TOKEN=ghp_xxxxxxxx你的token
```

---

## 📄 2. `repos.txt` 示例：

```
knemik97/manifesto-against-the-plagiarist-yunhe-wang
bytedance/trae-agent
```

---

## ⚙️ 3. `github_backup.sh` 脚本：

```bash
#!/bin/bash

# 读取 .env 中的 token
if [ -f .env ]; then
  export $(grep -v '^#' .env | xargs)
fi

if [ -z "$GITHUB_TOKEN" ]; then
  echo "❌ 请在 .env 文件中设置 GITHUB_TOKEN"
  exit 1
fi

# 检查 github-backup 是否安装
GITHUB_BACKUP_CMD=$(which github-backup)
if [ -z "$GITHUB_BACKUP_CMD" ]; then
  echo "❌ 未找到 github-backup 命令，请先激活 venv 或安装"
  exit 1
fi

mkdir -p backup

# 遍历 repos.txt 列表
while IFS= read -r repo; do
  if [[ "$repo" =~ ^#.*$ || -z "$repo" ]]; then
    continue  # 跳过注释和空行
  fi

  echo "🔁 处理仓库：$repo"

  owner=$(echo "$repo" | cut -d'/' -f1)
  repo_name=$(echo "$repo" | cut -d'/' -f2)
  repo_dir="./backup/$repo_name"

  mkdir -p "$repo_dir"

  # 克隆仓库代码
  if [ ! -d "$repo_dir/source-code/.git" ]; then
    echo "⬇️  cloning $repo ..."
    git clone "https://github.com/$repo.git" "$repo_dir/source-code"
  else
    echo "✅  已存在源码目录，跳过 clone"
  fi

  # 使用 github-backup 下载 issues、PR、wiki 等
  echo "🧱  备份元数据到 $repo_dir ..."
  github-backup "$owner" \
    --token "$GITHUB_TOKEN" \
    --repository "$repo_name" \
    --output-directory "$repo_dir" \
    --issues --issue-comments \
    --pulls --pull-comments --pull-commits --pull-details \
    --wikis --releases --assets \
    --skip-archived --skip-existing

  echo "✅ 完成备份：$repo"
  echo "-----------------------------"

done < repos.txt
```

---

## ✅ 使用方法（总结）：

```bash
cd your-backup-folder
chmod +x github_backup.sh

# 执行
./github_backup.sh
```

---

## 📦 备份输出示例：

```
backup/
├── manifesto-against-the-plagiarist-yunhe-wang/
│   ├── source-code/           ← git clone 的源码
│   ├── issues/                ← 所有 issues（json）
│   ├── pulls/                 ← 所有 PR 详情
│   ├── releases/              ← 发布版信息
│   └── ...                    ← 其他元数据
├── trae-agent/
│   ├── source-code/
│   ├── ...
```

---

是否也需要我给你做成 `.tar.gz` 压缩包命令？或者支持增量备份、按日期归档？我可以帮你继续扩展这个脚本。
