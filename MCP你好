éšæ‰‹çœ‹çœ‹åˆ°åº•æ˜¯ä¸ªå•¥
æ¨¡å‹ä¸Šä¸‹æ–‡åè®®æ˜¯ä¸€ç§å¼€æ”¾æ ‡å‡†ï¼Œä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿåœ¨å…¶æ•°æ®æºå’Œ AI é©±åŠ¨çš„å·¥å…·ä¹‹é—´æ„å»ºå®‰å…¨çš„åŒå‘è¿æ¥ã€‚æ¶æ„éå¸¸ç®€å•ï¼šå¼€å‘äººå‘˜å¯ä»¥é€šè¿‡ MCP æœåŠ¡å™¨å…¬å¼€ä»–ä»¬çš„æ•°æ®ï¼Œä¹Ÿå¯ä»¥æ„å»ºè¿æ¥åˆ°è¿™äº›æœåŠ¡å™¨çš„ AI åº”ç”¨ç¨‹åºï¼ˆMCP å®¢æˆ·ç«¯ï¼‰ã€‚
Today, we're introducing three major components of the Model Context Protocol for developers:
ä»Šå¤©ï¼Œæˆ‘ä»¬å°†ä¸ºå¼€å‘äººå‘˜ä»‹ç»æ¨¡å‹ä¸Šä¸‹æ–‡åè®®çš„ä¸‰ä¸ªä¸»è¦ç»„ä»¶ï¼š
The Model Context Protocol specification and SDKs
æ¨¡å‹ä¸Šä¸‹æ–‡åè®®è§„èŒƒå’Œ SDK
Local MCP server support in the Claude Desktop apps
Claude Desktop åº”ç”¨ç¨‹åºä¸­çš„æœ¬åœ° MCP æœåŠ¡å™¨æ”¯æŒ
An open-source repository of MCP servers
MCP æœåŠ¡å™¨çš„å¼€æºå­˜å‚¨åº“
MCP æ˜¯ä¸€ç§å¼€æ”¾åè®®ï¼Œå®ƒæ ‡å‡†åŒ–äº†åº”ç”¨ç¨‹åºå¦‚ä½•ä¸º LLM æä¾›ä¸Šä¸‹æ–‡ã€‚å°† MCP è§†ä¸º AI åº”ç”¨ç¨‹åºçš„ USB-C ç«¯å£ã€‚æ­£å¦‚ USB-C æä¾›äº†ä¸€ç§å°†è®¾å¤‡è¿æ¥åˆ°å„ç§å¤–å›´è®¾å¤‡å’Œé…ä»¶çš„æ ‡å‡†åŒ–æ–¹å¼ä¸€æ ·ï¼ŒMCP ä¹Ÿæä¾›äº†ä¸€ç§å°† AI æ¨¡å‹è¿æ¥åˆ°ä¸åŒæ•°æ®æºå’Œå·¥å…·çš„æ ‡å‡†åŒ–æ–¹å¼ã€‚
æ·»åŠ å›¾ç‰‡æ³¨é‡Šï¼Œä¸è¶…è¿‡ 140 å­—ï¼ˆå¯é€‰ï¼‰
aiè§£é‡Šï¼šè¿™ä¸€æ®µæ˜¯åœ¨è®² Model Context Protocolï¼ˆMCPï¼‰æ•´ä½“çš„â€œå®¿ä¸»â€“å®¢æˆ·ç«¯â€“æœåŠ¡å™¨â€æ¶æ„ï¼Œä»¥åŠå„æ–¹è§’è‰²æ˜¯æ€ä¹ˆé…åˆæ¥è®© AI åº”ç”¨é€æ˜åœ°æ‹¿åˆ°æœ¬åœ°ï¼è¿œç¨‹æ•°æ®çš„ã€‚æ‹†å¼€æ¥è¯´ï¼Œå°±æ˜¯ï¼š

1. æ ¸å¿ƒæ€æƒ³ï¼šç”¨ä¸€å¥—ç»Ÿä¸€çš„è½»é‡çº§ RPCï¼ˆè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼‰åè®®ï¼ŒæŠŠå„ç§â€œæ•°æ®æºâ€å°è£…æˆå°æœåŠ¡ï¼ˆMCP Serversï¼‰ï¼ŒHost ç¨‹åºï¼ˆMCP Hostsï¼‰é€šè¿‡ä¸€ä¸ª MCP Client æ’ä»¶ï¼Œè·Ÿè¿™äº›å°æœåŠ¡å¯¹è¯ï¼Œæ‹¿åˆ°å®ƒä»¬æä¾›çš„èƒ½åŠ›ï¼ˆæ¯”å¦‚è¯»æ–‡ä»¶ã€æŸ¥æ•°æ®åº“ã€è°ƒ Web APIâ€¦â€¦ï¼‰ï¼Œå†æŠŠç»“æœäº¤ç»™ LLM åšåç»­å¤„ç†ã€‚
 
2. è§’è‰²åˆ’åˆ†
   â€¢ MCP Hostï¼šä½ çš„ AI å®¢æˆ·ç«¯ï¼IDE æ’ä»¶ï¼Claude Desktop è¿™ç±»ç¨‹åºï¼Œæƒ³ç»™æ¨¡å‹â€œå–‚â€æœ¬åœ°æ–‡ä»¶ã€æ•°æ®åº“è®°å½•æˆ– Web æœåŠ¡çš„æ•°æ®ï¼Œå°±æŠŠè¿™äº›è¯·æ±‚éƒ½èµ° MCPã€‚
   â€¢ MCP Clientï¼šHost å’Œæ¯ä¸ª Server ä¹‹é—´çš„ä¸€å¯¹ä¸€é€šé“å®ç°ï¼Œè´Ÿè´£æŠŠ Host çš„è¯·æ±‚æŒ‰ MCP åè®®æ‰“åŒ…ã€å‘ç»™å¯¹åº”çš„ Serverï¼Œä¹ŸæŠŠ Server çš„å›å¤é€å› Hostã€‚
   â€¢ MCP Serverï¼šå°è€Œä¸“çš„è¿›ç¨‹ï¼æœåŠ¡ï¼Œæš´éœ²ä¸€ç»„é¢„å®šä¹‰æ¥å£ï¼ˆCapabilityï¼‰ï¼ŒæŒ‰ MCP åè®®æ¥æ”¶è¯·æ±‚ã€åˆ°å®ƒæ‰€ç®¡è¾–çš„æ•°æ®æºï¼ˆæœ¬åœ°æ–‡ä»¶ã€æ•°æ®åº“ã€æŸä¸ªäº‘ APIâ€¦â€¦ï¼‰æ‹¿æ•°æ®ã€å†æŠŠç»“æœæŒ‰åè®®è¿”å›ã€‚
   â€¢ Local Data Sourceï¼šå°±æ˜¯ä½ ç”µè„‘ä¸Šçš„æ–‡ä»¶ã€æ•°æ®åº“ã€åå°æœåŠ¡ï¼ŒMCP Server ç›´æ¥è®¿é—®å®ƒä»¬æ¥è¯»å†™æ•°æ®ã€‚
   â€¢ Remote Serviceï¼šäº’è”ç½‘æˆ–å†…ç½‘é‡Œçš„å…¶å®ƒç³»ç»Ÿï¼ˆRest APIã€GraphQLã€RPC æœåŠ¡â€¦â€¦ï¼‰ï¼Œç”± MCP Server å……å½“â€œä¸­é—´äººâ€å»è°ƒç”¨ã€‚

3. æ•´ä½“æµç¨‹ï¼ˆå›¾ç¤ºæ¦‚å¿µï¼‰
   Host
     â†“ï¼ˆMCP Clientï¼‰
   Server A â€”â†’ Local Data Source A
     â†“
   Server B â€”â†’ Local Data Source B
     â†“
   Server C â€”â†’ Remote Service C

   1) Host è¦è¯»æœ¬åœ°æ–‡ä»¶ï¼Œå°±è®© MCP Client æŠŠâ€œread_file(path)â€çš„è¯·æ±‚å‘ç»™æŸä¸ª Server Aã€‚
   2) Server A çœ‹åˆ°è¯·æ±‚ï¼Œå»è¯»ä½ æœºå™¨ä¸Šçš„é‚£ä¸ªæ–‡ä»¶ï¼ŒæŠŠå†…å®¹å°è£…æˆ MCP å›å¤è¿”å›ç»™ Hostã€‚
   3) åŒç†ï¼Œå¦‚æœ Host æƒ³è°ƒä¸€ä¸ªå¤–éƒ¨ APIï¼Œå°±èµ° Server Cï¼ŒServer C å†è°ƒç”¨ Remote Service Cï¼ŒæŠŠç»“æœå›ä¼ ã€‚

4. ä¸ºä»€ä¹ˆè¦è¿™æ ·åš
   â€“ è§£è€¦ï¼šHostï¼ˆAI æ¨¡å‹è¿è¡Œç¯å¢ƒï¼‰ä¸ç”¨ç›´æ¥ç®¡ç†å„ç§æ•°æ®æºçš„æˆæƒã€è·¯å¾„ã€æ ¼å¼ï¼Œåªç®¡ç”¨ MCP è°ƒç”¨å³å¯ã€‚
   â€“ å®‰å…¨ï¼šæœ¬åœ°æ•°æ®çš„è®¿é—®æƒé™é›†ä¸­åœ¨å„ä¸ªå° Server ä¸Šï¼ŒHost/æ¨¡å‹æœ¬èº«æ— é¡»æ‹¥æœ‰æ–‡ä»¶ç³»ç»Ÿæˆ–æ•°æ®åº“çš„å…¨å±€æƒé™ã€‚
   â€“ å¯æ‰©å±•ï¼šæ–°åŠ ä¸€ä¸ªæ•°æ®æºï¼Œåªéœ€å†™ä¸€ä¸ªæ–°çš„ MCP Server æ’ä»¶ï¼ŒHost å‘ç°åˆ°å°±èƒ½ç”¨ï¼Œæ— éœ€æ”¹ Host ä»£ç ã€‚

æ€»çš„æ¥è¯´ï¼Œè¿™æ®µè¯å°±æ˜¯åœ¨è¯´æ˜ï¼šMCP å¹¶éå•ä½“åº“æˆ–å•ä¸€è¿›ç¨‹ï¼Œè€Œæ˜¯ä¸€å¥—åˆ†å¸ƒå¼çš„ã€ä»¥ Hostâ€“Clientâ€“Server ä¸ºæ ¸å¿ƒã€å¯ä»¥çµæ´»æ¥å…¥å¤šç§æœ¬åœ°/è¿œç¨‹æ•°æ®æºçš„åè®®æ¶æ„ã€‚ Host é€šè¿‡ MCP Client ä¸ä¸€ä¸ªæˆ–å¤šä¸ª MCP Server å»ºç«‹ 1:1 è¿æ¥ï¼Œå„ Server å†åˆ†åˆ«å¯¹æ¥æœ¬åœ°æ–‡ä»¶ã€æ•°æ®åº“æˆ– Web APIï¼Œæœ€ç»ˆæŠŠç»“æœç»Ÿä¸€ã€é€æ˜åœ°äº¤ç»™æƒ³ç”¨å®ƒä»¬çš„ AI å·¥å…·ã€‚


çœ‹çœ‹å®˜æ–¹æ•™ç¨‹å’‹è¯´ï¼Œæ‘˜ä¸¤æ®µï¼š
Core MCP Concepts æ ¸å¿ƒ MCP æ¦‚å¿µ
MCP servers can provide three main types of capabilities:
MCP æœåŠ¡å™¨å¯ä»¥æä¾›ä¸‰ç§ä¸»è¦ç±»å‹çš„åŠŸèƒ½ï¼š
Resources: File-like data that can be read by clients (like API responses or file contents)
èµ„æº ï¼šå®¢æˆ·ç«¯å¯ä»¥è¯»å–çš„ç±»ä¼¼æ–‡ä»¶çš„æ•°æ®ï¼ˆå¦‚ API å“åº”æˆ–æ–‡ä»¶å†…å®¹ï¼‰
Tools: Functions that can be called by the LLM (with user approval)
å·¥å…· ï¼šLLM å¯ä»¥è°ƒç”¨çš„å‡½æ•°ï¼ˆç»ç”¨æˆ·æ‰¹å‡†ï¼‰
Prompts: Pre-written templates that help users accomplish specific tasks
æç¤º ï¼šå¸®åŠ©ç”¨æˆ·å®Œæˆç‰¹å®šä»»åŠ¡çš„é¢„å…ˆç¼–å†™çš„æ¨¡æ¿
æ‚¨å¿…é¡»ä¼š èŸ’ ï¼è¿˜æœ‰ æ³•å­¦ç¡•å£«ï¼ï¼ï¼ï¼ï¼
This quickstart assumes you have familiarity with:
æœ¬å¿«é€Ÿå…¥é—¨å‡å®šæ‚¨ç†Ÿæ‚‰ï¼š
Python èŸ’
LLMs like Claude åƒ Claude è¿™æ ·çš„æ³•å­¦ç¡•å£«
é¦–å…ˆï¼Œè®©æˆ‘ä»¬å®‰è£…uvå¹¶è®¾ç½®æˆ‘ä»¬çš„ Python é¡¹ç›®å’Œç¯å¢ƒ
é‚£uvæ˜¯å•¥ï¼Ÿdeepseekè¯´æ˜¯ã€ŒPython åŒ…ç®¡ç†å·¥å…·ã€ï¼Œgptè¯´æ˜¯ã€Œæœ¬åœ°â†’å…¬ç½‘éš§é“å·¥å…·ã€ï¼Œâ€ä½†å®é™…ä¸Šæ˜¯å› ä¸ºAstral å›¢é˜Ÿå¼€å‘äº†åŒåä½†åŠŸèƒ½å®Œå…¨ä¸åŒçš„ä¸¤ä¸ªå·¥å…·ï¼Œè€Œå®ƒä»¬çš„å®˜ç½‘è·¯å¾„å’Œç”¨é€”æˆªç„¶ä¸åŒâ€œ
1. Python åŒ…ç®¡ç†å™¨ uv
å®˜ç½‘ï¼šhttps://astral.sh/uv
ç”¨é€”ï¼šé«˜æ€§èƒ½ Python ä¾èµ–ç®¡ç†å·¥å…·ï¼ˆæ›¿ä»£ pipï¼‰ã€‚
å®‰è£…å‘½ä»¤ï¼š
powershell

å¤åˆ¶

ä¸‹è½½
irm https://astral.sh/uv/install.ps1 | iex
2. å…¬ç½‘éš§é“å·¥å…· uv
å®˜ç½‘ï¼šhttps://uv.astral.shï¼ˆæ³¨æ„å­åŸŸåä¸åŒï¼‰
ç”¨é€”ï¼šè½»é‡çº§åå‘éš§é“å®¢æˆ·ç«¯ï¼ˆç±»ä¼¼ ngrokï¼‰ã€‚
åŠŸèƒ½ï¼šæš´éœ²æœ¬åœ°æœåŠ¡åˆ°å…¬ç½‘ï¼ˆHTTP/TCP/UDPï¼‰ã€‚
å®‰è£…å‘½ä»¤ï¼šå¯èƒ½ä¸ä½ æåˆ°çš„å‘½ä»¤ç›¸åŒï¼Œä½†éœ€ç¡®è®¤å…·ä½“è„šæœ¬æ¥æºã€‚

é‚£å¾ˆé…·äº†ï¼Œé‚£æˆ‘ä¸Šå®˜ç½‘çœ‹çœ‹è«ï¼Œhttps://astral.sh/uv/ï¼Œ

uv ç´«å¤–çº¿
An extremely fast Python package and project manager, written in Rust.
ä¸€ä¸ªé€Ÿåº¦æå¿«çš„ Python åŒ…å’Œé¡¹ç›®ç»ç†ï¼Œç”¨ Rust ç¼–å†™ã€‚
âš¡ï¸ æ¯”pipå¿« 10-100 å€ã€‚

é‚£å¾ˆé…·äº†

é‚£æˆ‘ä»¬ä¸ºä»€ä¹ˆè¿˜è¦ä½¿ç”¨pipï¼Ÿï¼Ÿï¼Ÿ

ç„¶åæµç¨‹æ˜¯è¿™æ ·:
Whatâ€™s happening under the hood
å¹•åå‘ç”Ÿäº†ä»€ä¹ˆ
When you ask a question:
å½“æ‚¨æå‡ºé—®é¢˜æ—¶ï¼š
The client sends your question to Claude
å®¢æˆ·å°†æ‚¨çš„é—®é¢˜å‘é€ç»™ Claude
Claude analyzes the available tools and decides which one(s) to use
Claude åˆ†æå¯ç”¨çš„å·¥å…·å¹¶å†³å®šä½¿ç”¨å“ªä¸€ä¸ª
The client executes the chosen tool(s) through the MCP server
å®¢æˆ·ç«¯é€šè¿‡ MCP æœåŠ¡å™¨æ‰§è¡Œæ‰€é€‰å·¥å…·
The results are sent back to Claude
ç»“æœå°†å‘é€å›ç»™ Claude
Claude formulates a natural language response
Claude åˆ¶å®šè‡ªç„¶è¯­è¨€å“åº”
The response is displayed to you!
å“åº”å°†å‘æ‚¨æ˜¾ç¤ºï¼

ä»£ç ç»†èŠ‚è®©aiæ€»ç»“ä¸‹ï¼š
å¥½çš„ï¼Œæˆ‘ç”¨æ›´æ¸…æ™°çš„æ–¹å¼æ¢³ç†æ•´ä¸ªæµç¨‹ï¼Œå¹¶æ˜ç¡®æ¯ä¸ªç»„ä»¶çš„è§’è‰²å’Œè°ƒç”¨å…³ç³»ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªåˆ†æ­¥çš„ã€è§’è‰²åŒ–çš„è§£é‡Šï¼š


1. ç»„ä»¶è§’è‰²è¯´æ˜
ç»„ä»¶/è§’è‰²
ä½œç”¨
uv (Pythonç‰ˆ)
Astral å¼€å‘çš„åŒ…ç®¡ç†å·¥å…·ï¼Œæ›¿ä»£ pipï¼Œè´Ÿè´£åˆ›å»ºç¯å¢ƒã€å®‰è£…ä¾èµ–ã€‚
MCPæ¡†æ¶
ä¸€ä¸ªåè®®åŒ–å·¥å…·æ¡†æ¶ï¼Œé€šè¿‡è£…é¥°å™¨å’Œç±»å‹æç¤ºè‡ªåŠ¨ç”Ÿæˆå·¥å…·æ¥å£ã€‚
FastMCP
MCP çš„å¿«é€Ÿå®ç°ç±»ï¼Œç®€åŒ–æœåŠ¡å™¨å¼€å‘ï¼ˆç¤ºä¾‹ä¸­çš„ mcp = FastMCP("weather")ï¼‰ã€‚
NWS API
ç¾å›½å›½å®¶æ°”è±¡å±€æä¾›çš„å…è´¹å¤©æ°”æ•°æ®æ¥å£ã€‚
Claude for Desktop
å‡è®¾çš„MCPå®¢æˆ·ç«¯å·¥å…·ï¼Œç”¨äºè°ƒç”¨ä½ ç¼–å†™çš„å¤©æ°”æœåŠ¡ï¼ˆæ–‡ä¸­æåˆ°æµ‹è¯•ç”¨ï¼‰ã€‚


2. å®Œæ•´æµç¨‹ä¸è°ƒç”¨å…³ç³»
é˜¶æ®µ1ï¼šç¯å¢ƒå‡†å¤‡
å®‰è£… uv 
irm https://astral.sh/uv/install.ps1 | iex

ä½œç”¨ï¼šå®‰è£… Python åŒ…ç®¡ç†å™¨ uvï¼ˆç±»ä¼¼ pipï¼Œä½†æ›´å¿«ï¼‰ã€‚

åˆå§‹åŒ–é¡¹ç›® 
uv init weather  # åˆ›å»ºé¡¹ç›®ç›®å½•
cd weather       # è¿›å…¥ç›®å½•
uv venv          # åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
.\.venv\Scripts\activate  # æ¿€æ´»ç¯å¢ƒï¼ˆWindowsï¼‰

è§’è‰²ï¼šuv è´Ÿè´£ç®¡ç†é¡¹ç›®ç¯å¢ƒå’Œä¾èµ–ã€‚

å®‰è£…ä¾èµ– 
uv add mcp[cli] httpx

å®‰è£…çš„åŒ…ï¼š  

mcp[cli]ï¼šMCPæ¡†æ¶çš„æ ¸å¿ƒåº“ã€‚  
httpxï¼šå¼‚æ­¥HTTPå®¢æˆ·ç«¯ï¼ˆç”¨äºè¯·æ±‚NWS APIï¼‰ã€‚




é˜¶æ®µ2ï¼šç¼–å†™æœåŠ¡é€»è¾‘
æ–‡ä»¶ï¼šweather.py 
from mcp.server.fastmcp import FastMCP
import httpx
â€‹
# åˆå§‹åŒ–MCPæœåŠ¡å™¨
mcp = FastMCP("weather")
â€‹
# å®šä¹‰å·¥å…·1ï¼šè·å–å¤©æ°”è­¦æŠ¥
@mcp.tool()
async def get_alerts(state: str) -> str:
    url = f"https://api.weather.gov/alerts/active/area/{state}"
    data = await httpx.get(url)  # è°ƒç”¨NWS API
    return "å¤„ç†åçš„è­¦æŠ¥ä¿¡æ¯"
â€‹
# å®šä¹‰å·¥å…·2ï¼šè·å–å¤©æ°”é¢„æŠ¥
@mcp.tool()
async def get_forecast(lat: float, lon: float) -> str:
    url = f"https://api.weather.gov/points/{lat},{lon}"
    data = await httpx.get(url)  # è°ƒç”¨NWS API
    return "å¤„ç†åçš„é¢„æŠ¥ä¿¡æ¯"
â€‹
# å¯åŠ¨æœåŠ¡å™¨
if __name__ == "__main__":
    mcp.run(transport='stdio')
è°ƒç”¨å…³ç³»ï¼š  
ç”¨æˆ·é€šè¿‡å®¢æˆ·ç«¯ï¼ˆå¦‚Claudeï¼‰è°ƒç”¨å·¥å…·ï¼ˆå¦‚ get_alerts("CA")ï¼‰ã€‚  
MCPæ¡†æ¶è§£æè¯·æ±‚ï¼Œæ‰§è¡Œå¯¹åº”çš„ @mcp.tool å‡½æ•°ã€‚  
å‡½æ•°å†…éƒ¨é€šè¿‡ httpx è¯·æ±‚ NWS API å¹¶è¿”å›å¤„ç†åçš„æ•°æ®ã€‚  


é˜¶æ®µ3ï¼šè¿è¡Œä¸æµ‹è¯•
å¯åŠ¨æœåŠ¡ 
uv run weather.py

è§’è‰²ï¼šuv å¯åŠ¨Pythonè„šæœ¬ï¼ŒMCPæœåŠ¡å¼€å§‹ç›‘å¬è¯·æ±‚ã€‚

å®¢æˆ·ç«¯è°ƒç”¨ 

å‡è®¾å®¢æˆ·ç«¯æ˜¯ Claude for Desktopï¼Œå®ƒä¼šé€šè¿‡MCPåè®®å‘é€è¯·æ±‚ï¼ˆå¦‚è¯·æ±‚åŠ å·çš„å¤©æ°”è­¦æŠ¥ï¼‰ã€‚  
æœåŠ¡æ”¶åˆ°è¯·æ±‚åï¼Œè°ƒç”¨ get_alerts("CA")ï¼Œè¿”å›æ ¼å¼åŒ–ç»“æœã€‚



3. æ•°æ®æµå›¾ç¤º
ç”¨æˆ·/å®¢æˆ·ç«¯
  â”‚
  â†“  (MCPåè®®è¯·æ±‚ï¼Œå¦‚get_alerts)
FastMCPæœåŠ¡å™¨ (weather.py)
  â”‚
  â†“  (è°ƒç”¨NWS API)
NWS Weather API
  â”‚
  â†“  (è¿”å›JSONæ•°æ®)
FastMCPæœåŠ¡å™¨ (å¤„ç†æ•°æ®)
  â”‚
  â†“  (è¿”å›æ ¼å¼åŒ–ç»“æœ)
ç”¨æˆ·/å®¢æˆ·ç«¯


4. å…³é”®ç‚¹æ€»ç»“
uv çš„ä½œç”¨ 

ä»…ç”¨äºç¯å¢ƒç®¡ç†ï¼ˆå®‰è£…ä¾èµ–ã€åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼‰ï¼Œä¸å‚ä¸æœåŠ¡è¿è¡Œæ—¶é€»è¾‘ã€‚

MCPæ¡†æ¶çš„ä½œç”¨ 

æä¾›å·¥å…·åè®®åŒ–èƒ½åŠ›ï¼šé€šè¿‡ @mcp.tool è£…é¥°å™¨å°†å‡½æ•°æš´éœ²ä¸ºå¯è°ƒç”¨çš„æ¥å£ã€‚

NWS API çš„è°ƒç”¨ 

ç”± httpx åœ¨å·¥å…·å‡½æ•°å†…éƒ¨ç›´æ¥è°ƒç”¨ï¼Œä¸æœåŠ¡æ¡†æ¶è§£è€¦ã€‚

å®¢æˆ·ç«¯äº¤äº’ 

å®¢æˆ·ç«¯é€šè¿‡MCPåè®®ä¸ weather.py é€šä¿¡ï¼Œæ— éœ€å…³å¿ƒå†…éƒ¨å®ç°ã€‚



5. ç±»æ¯”ç†è§£
uv â‰ˆ æ›´å¿«çš„ pipï¼ˆåªç®¡è£…åŒ…ï¼‰ã€‚  
MCP â‰ˆ ä¸€ä¸ªè‡ªåŠ¨ç”ŸæˆAPIçš„æ¡†æ¶ï¼ˆç±»ä¼¼FastAPIçš„ç®€åŒ–ç‰ˆï¼‰ã€‚  
NWS API â‰ˆ ç¬¬ä¸‰æ–¹æ•°æ®æºï¼ˆç±»ä¼¼è°ƒç”¨æ”¯ä»˜å®çš„å¤©æ°”æ¥å£ï¼‰ã€‚  
å®¢æˆ·ç«¯ â‰ˆ ä½¿ç”¨ä½ æœåŠ¡çš„APPï¼ˆå¦‚å¾®ä¿¡å°ç¨‹åºè°ƒç”¨ä½ çš„åç«¯ï¼‰ã€‚  
è¿™æ ·æ˜¯å¦æ›´æ¸…æ™°äº†ï¼Ÿå¦‚æœæœ‰å…·ä½“ç¯èŠ‚ä»ä¸æ¸…æ¥šï¼Œå¯ä»¥é’ˆå¯¹æ€§æé—®ï¼

haod e,é‚£ä¹ˆæˆ‘ä»¬å·²ç»å®Œå…¨æ˜ç™½äº†è¿™æ˜¯æ€ä¹ˆå›äº‹äº†ï¼Œå¯æ˜¯è®©ä¸ºä»€ä¹ˆå«ä¸Šä¸‹æ–‡åè®®å‘¢ï¼Ÿ
æ—¨åœ¨ç»Ÿä¸€å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ä¸å¤–éƒ¨æ•°æ®æºå’Œå·¥å…·ä¹‹é—´çš„â€œä¸Šä¸‹æ–‡â€äº¤æ¢ï¼Œè€Œä¸ä»…ä»…æ˜¯ç®€å•çš„ API è°ƒç”¨ã€‚MCP å®šä¹‰äº†èµ„æºï¼ˆResourcesï¼‰ã€æç¤ºè¯ï¼ˆPromptsï¼‰ã€å·¥å…·ï¼ˆToolsï¼‰ã€ä¼ è¾“å±‚ï¼ˆTransportsï¼‰ç­‰æ ¸å¿ƒç»„ä»¶ï¼Œä½¿å¾—æ¨¡å‹åœ¨å¤„ç†ä»»åŠ¡æ—¶ï¼Œèƒ½å¤ŸæŒç»­ç®¡ç†å¹¶ä¼ é€’å½“å‰ä¼šè¯æ‰€éœ€çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œè€Œä¸ä»…ä»…æ˜¯å•æ¬¡çš„å‡½æ•°è°ƒç”¨â€‹çŸ¥ä¹ä¸“æ â€‹çŸ¥ä¹ä¸“æ ã€‚
MCP æ˜¯ä»€ä¹ˆï¼Ÿ
 å¼€æ”¾æ ‡å‡†åè®®ï¼šMCP ç”± Anthropic å‘å¸ƒï¼Œå–åâ€œæ¨¡å‹ä¸Šä¸‹æ–‡åè®®â€ï¼Œæ—¨åœ¨æ‰“ç ´ AI åº”ç”¨ä¸æ•°æ®æºæˆ–å·¥å…·ä¹‹é—´çš„ç¢ç‰‡åŒ–é›†æˆï¼Œå®ç°ç±»ä¼¼ USB-C æ¥å£çš„â€œå³æ’å³ç”¨â€ä½“éªŒâ€‹åšå®¢å›­ã€‚
 
 ä¸æ­¢è°ƒç”¨å·¥å…·ï¼šé™¤äº†è®©æ¨¡å‹èƒ½è°ƒç”¨å¤–éƒ¨ APIï¼ŒMCP è¿˜è´Ÿè´£ä¸Šä¸‹æ–‡çš„åŠ¨æ€æ³¨å…¥ã€ç®¡ç†ä¸åˆ†å‘ï¼Œç¡®ä¿æ¨¡å‹å’Œå·¥å…·åœ¨å¤šè½®å¯¹è¯æˆ–å¤æ‚ä»»åŠ¡ä¸­å…±äº«ç›¸åŒçš„ç¯å¢ƒçŠ¶æ€â€‹è…¾è®¯äº‘ - äº§ä¸šæ™ºå˜ äº‘å¯æœªæ¥ã€‚
 
â€œä¸Šä¸‹æ–‡åè®®â€ åç§°å«ä¹‰
 Context = ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼šMCP ä¸­çš„â€œContextâ€ä¸ä»…åŒ…å«ä¸€æ¬¡è°ƒç”¨æ‰€éœ€çš„å‚æ•°ï¼Œè¿˜æ¶µç›–ä¼šè¯å†å²ã€å·¥å…·é…ç½®ã€èµ„æºæƒé™ç­‰å¤šç»´åº¦ä¿¡æ¯ã€‚å®ƒè§„å®šäº†å¦‚ä½•æŠŠè¿™äº›ä¸Šä¸‹æ–‡æ‰“åŒ…ã€ä¼ è¾“å¹¶ç”±æ¨¡å‹ä¸å·¥å…·ç«¯å…±åŒè§£æï¼Œä»¥ä¿æŒæ•´ä¸ªç³»ç»Ÿå¯¹è¯æˆ–ä»»åŠ¡æ‰§è¡Œçš„è¿è´¯æ€§â€‹çŸ¥ä¹ä¸“æ ã€‚
 
 è¶…è¶Šå‡½æ•°è°ƒç”¨ï¼šä¼ ç»Ÿçš„ API è°ƒç”¨åè®®åªå…³æ³¨è¯·æ±‚â€”å“åº”ï¼›è€Œ MCP åˆ™æ˜¯ä¸€ä¸ªâ€œä¸Šä¸‹æ–‡å±‚â€ï¼Œç±»ä¼¼äºç½‘ç»œä¸­çš„ HTTP+Cookiesï¼Œæ—¢è¦ä¿è¯æ•°æ®äº¤äº’ï¼Œåˆè¦ç»´æŠ¤çŠ¶æ€ä¸å®‰å…¨æ€§â€‹GitHubã€‚
 
ä¸ºä»€ä¹ˆä¸å«â€œè°ƒç”¨å·¥å…·åè®®â€ï¼Ÿ
 æ›´å®½çš„èŒè´£è¾¹ç•Œï¼šå·¥å…·è°ƒç”¨åªæ˜¯ MCP çš„ä¸€ä¸ªå­åŠŸèƒ½ã€‚MCP åŒæ—¶æ‰¿æ‹…ä¸Šä¸‹æ–‡æ³¨å†Œã€ç¼“å­˜ã€ä¼˜å…ˆçº§è°ƒåº¦å’Œå®‰å…¨è®¤è¯ç­‰èŒè´£ï¼Œæ˜¯ä¸€ä¸ªçœŸæ­£çš„â€œä¸­é—´ä»¶â€å±‚ï¼Œè€Œéä»…ä»…æ˜¯å·¥å…·æ¥å£çš„å°è£…â€‹è…¾è®¯äº‘ - äº§ä¸šæ™ºå˜ äº‘å¯æœªæ¥ã€‚
 
 å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¶æ„ï¼šMCP å®šä¹‰äº† Hostï¼ˆå®¿ä¸»åº”ç”¨ï¼‰ä¸ Serverï¼ˆå·¥å…·æä¾›æ–¹ï¼‰ä¹‹é—´çš„é€šä¿¡è§„èŒƒï¼Œæ”¯æŒå¤šæœåŠ¡å™¨å¹¶è¡Œè¿æ¥ï¼Œèƒ½åœ¨ä¸åŒæ•°æ®æºä¹‹é—´åˆ‡æ¢ä¸Šä¸‹æ–‡ï¼Œæ›´åƒæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„â€œä¼šè¯ç®¡ç†åè®®â€ï¼Œè€Œéå•çº¯çš„ API è§¦å‘æœºåˆ¶â€‹GitHubã€‚
 
 ç”Ÿæ€äº’æ“ä½œæ€§ï¼šè¶Šæ¥è¶Šå¤šçš„ç¬¬ä¸‰æ–¹å¹³å°å¼€å§‹æ”¯æŒ MCPï¼Œä½¿å¾—å¼€å‘è€…â€œä¸€æ¬¡é›†æˆã€å¤šå¤„å¯ç”¨â€ï¼Œæ— éœ€ä¸ºæ¯ä¸ªå·¥å…·å•ç‹¬ç¼–å†™é€‚é…å±‚ï¼Œè¿™æ­£æ˜¯â€œä¸Šä¸‹æ–‡åè®®â€åç§°æ‰€è¦å¼ºè°ƒçš„ï¼šæ ‡å‡†åŒ–ä¸Šä¸‹æ–‡äº¤æ¢ï¼Œä»¥å®ç°è·¨ç³»ç»Ÿäº’æ“ä½œæ€§â€‹Vaayne's Tea Houseã€‚
 
å®é™…åº”ç”¨ä¸¾ä¾‹
 Claude Desktop æ¼”ç¤ºï¼šAnthropic åœ¨å‘å¸ƒæ—¶æ¼”ç¤ºäº†é€šè¿‡ MCP è¿æ¥ GitHubï¼ŒAI æ¨¡å‹èƒ½å¤Ÿåˆ›å»ºä»“åº“ã€æäº¤ Pull Requestï¼Œå¹¶åœ¨æ•´ä¸ªæµç¨‹ä¸­åŠ¨æ€ç»´æŠ¤ä¼šè¯çŠ¶æ€ï¼ˆå¦‚ç”¨æˆ·æƒé™ã€PR å†å²ç­‰ï¼‰ï¼Œå‡¸æ˜¾äº†ä¸Šä¸‹æ–‡ç®¡ç†çš„é‡è¦æ€§ï¼Œè€Œä¸ä»…æ˜¯å•æ¬¡è°ƒç”¨æ¥å£â€‹The Vergeã€‚
 
 APISIX-MCP æ¡ˆä¾‹ï¼šåœ¨ APISIX-MCP é¡¹ç›®ä¸­ï¼ŒMCP å°†è‡ªç„¶è¯­è¨€æŒ‡ä»¤è½¬æ¢ä¸º API ç®¡ç†æ“ä½œï¼Œå¹¶åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æºå¸¦è®¤è¯ä¿¡æ¯ã€æ“ä½œæ—¥å¿—ã€ä¸Šä¸‹æ–‡å¿«ç…§ç­‰ï¼Œä¸ºè¿ç»´åœºæ™¯æä¾›äº†å¯é çš„ä¸Šä¸‹æ–‡æ„ŸçŸ¥èƒ½åŠ›ï¼Œè¶…è¶Šäº†ä¼ ç»Ÿçš„ REST è°ƒç”¨æ–¹å¼â€‹Apache APISIXã€‚
 
å°ç»“
å°† MCP ç§°ä¸ºâ€œä¸Šä¸‹æ–‡åè®®â€æ˜¯å› ä¸ºå®ƒå…³æ³¨çš„æ˜¯æ•´ä¸ª AI ç³»ç»Ÿåœ¨å¤šè½®å¯¹è¯æˆ–å¤æ‚ä»»åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­çš„â€œä¸Šä¸‹æ–‡â€ç®¡ç†ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸€æ¬¡æ€§â€œè°ƒç”¨å·¥å…·â€ã€‚é€šè¿‡å®šä¹‰ç»Ÿä¸€çš„ä¸Šä¸‹æ–‡äº¤æ¢æ ¼å¼å’Œä¼ è¾“æœºåˆ¶ï¼ŒMCP ä¸º AI åº”ç”¨æä¾›äº†ä¸€ä¸ªå¯æ‰©å±•ã€å®‰å…¨ã€å¯å®¡è®¡çš„ä¸­é—´å±‚ï¼Œæ”¯æ’‘æœªæ¥æ›´æ™ºèƒ½ã€æ›´è‡ªä¸»çš„ Agent åŒ–ç”Ÿæ€å‘å±•â€‹

--- 

æ‰¾ä¸ª Example Servers - Model Context Protocol çœ‹çœ‹
servers/src/puppeteer at main Â· modelcontextprotocol/servers 
æ¥ï¼Œçœ‹çœ‹ä»£ç  servers/src/puppeteer/index.ts at main Â· modelcontextprotocol/servers 
å¯¹å¯¹å¯¹ï¼Œä½ è´´çš„è¿™æ®µä»£ç ï¼Œç¡®å®å°±æ˜¯ mcp-servers/puppeteer çš„æ ¸å¿ƒå®ç°ï¼
 æˆ‘ç»™ä½ æ‹†è§£ä¸€ä¸‹å®ƒåˆ°åº•æ˜¯æ€ä¹ˆè¿è¡Œçš„ï¼Œèƒ½å¸®ä½ å¿«é€ŸæŒæ¡æ•´ä¸ªç»“æ„ï¼š
ğŸ§© æ•´ä½“ç»“æ„æ€»ç»“
1. å¯åŠ¨ä¸€ä¸ª MCP Server
 ç”¨ @modelcontextprotocol/sdk/server æä¾›çš„ Server ç±»ã€‚
 
 ç”¨ StdioServerTransport â€”â€” èµ°çš„æ˜¯æ ‡å‡†è¾“å…¥è¾“å‡ºï¼ˆStdin/Stdoutï¼‰ä½œä¸ºé€šä¿¡ç®¡é“ï¼Œä¸æ˜¯ HTTPã€‚
 
 ç­‰äºæ˜¯å¼€äº†ä¸€ä¸ª MCP Serverï¼Œæ¨¡å‹ï¼ˆAgentï¼‰å¯ä»¥è·Ÿå®ƒç”¨ MCP æ ‡å‡†åè®®èŠå¤©ã€‚
 
ts
å¤åˆ¶ç¼–è¾‘
const server = new Server({...})
await server.connect(new StdioServerTransport());

2. æ³¨å†Œ MCPçš„æ ‡å‡†æ¥å£
MCPæ ‡å‡†æœ‰å‡ ç§è¯·æ±‚ï¼Œæ¯”å¦‚ï¼š
 ListResourcesï¼šåˆ—å‡ºèµ„æº
 
 ReadResourceï¼šè¯»å–æŸä¸ªèµ„æº
 
 ListToolsï¼šåˆ—å‡ºå·¥å…·
 
 CallToolï¼šè°ƒç”¨å·¥å…·
 
è¿™ä¸ª puppeteer server ç»™å®ƒä»¬éƒ½æŒ‚äº†è‡ªå·±çš„å¤„ç†å™¨ï¼ˆsetRequestHandlerï¼‰ï¼š
ts
å¤åˆ¶ç¼–è¾‘
server.setRequestHandler(ListToolsRequestSchema, async () => { tools: TOOLS })
server.setRequestHandler(CallToolRequestSchema, async (req) => handleToolCall(req.params.name, req.params.arguments))
server.setRequestHandler(ListResourcesRequestSchema, ...)
server.setRequestHandler(ReadResourceRequestSchema, ...)

3. å®šä¹‰äº†æµè§ˆå™¨æ§åˆ¶çš„å·¥å…·é›† (TOOLS)
ä¸€ä¸ª MCP Tool = ä¸€ä¸ª JSON Schemaæè¿°çš„åŠ¨ä½œï¼Œæ¯”å¦‚ï¼š

MCPå·¥å…·å
åšä»€ä¹ˆ
å‚æ•°
puppeteer_navigate
æ‰“å¼€ç½‘å€
{ url, launchOptions }
puppeteer_screenshot
æˆªå›¾
{ name, selector, width, height }
puppeteer_click
ç‚¹å‡»å…ƒç´ 
{ selector }
puppeteer_fill
å¡«è¾“å…¥æ¡†
{ selector, value }
puppeteer_select
é€‰ä¸‹æ‹‰æ¡†
{ selector, value }
puppeteer_hover
æ‚¬åœå…ƒç´ 
{ selector }
puppeteer_evaluate
æ‰§è¡Œ JS è„šæœ¬
{ script }

è¿™äº›éƒ½å°è£…åˆ° TOOLS: Tool[] é‡Œäº†ï¼Œä¾› MCP Server è¿”å›ç»™å®¢æˆ·ç«¯ï¼ˆæ¯”å¦‚å¤§æ¨¡å‹ï¼‰ã€‚
4. å¤„ç†æŒ‡ä»¤ï¼šhandleToolCall
å¤§æ¨¡å‹å‘æ¥æŒ‡ä»¤ï¼Œèµ°åˆ°è¿™é‡Œï¼š
 æ ¹æ®æŒ‡ä»¤å(name)å’Œå‚æ•°(args)å»æ‰§è¡Œå¯¹åº” Puppeteer çš„æ“ä½œã€‚
 
 å…ˆç¡®ä¿æœ‰æµè§ˆå™¨å¼€ç€ï¼ˆensureBrowserï¼‰
 
 ç„¶åæ¯”å¦‚ï¼šè°ƒç”¨ page.goto(url)ã€page.screenshot()ã€page.click(selector)ç­‰ç­‰ã€‚
 
æ ¸å¿ƒåˆ†å‘é€»è¾‘é•¿è¿™æ ·ï¼š
ts
å¤åˆ¶ç¼–è¾‘
switch (name) {
  case "puppeteer_navigate": ...
  case "puppeteer_screenshot": ...
  case "puppeteer_click": ...
  ...
}

æ¯ç§ case éƒ½è¿”å› MCPæ ‡å‡†çš„ CallToolResultï¼š
 content: [{type: "text", text: "xxx"}]
 
 isError: true/false
 
5. èµ„æºç®¡ç†ï¼šæˆªå›¾å’Œæ§åˆ¶å°æ—¥å¿—
å®ƒè¿˜ç»´æŠ¤äº†ä¸€äº›èµ„æºï¼Œå¯ä»¥è¢«è¯»å–ï¼Œæ¯”å¦‚ï¼š
 console://logs æµè§ˆå™¨é‡Œçš„ console æ—¥å¿—
 
 screenshot://xxx ä¿å­˜çš„æˆªå›¾
 
å­˜å‚¨åœ¨ï¼š
 consoleLogs æ•°ç»„
 
 screenshots Mapç»“æ„
 
èµ„æºå¯ä»¥è¢« ListResources å’Œ ReadResource è¯·æ±‚è®¿é—®ã€‚
ğŸ”¥ æ€»ç»“å®ƒçš„æ ¸å¿ƒå·¥ä½œæµ
 å¯åŠ¨ MCP Serverï¼ˆç”¨ stdio é€šä¿¡ï¼‰
 
 å¤§æ¨¡å‹å‘æ¥ "åˆ—å‡ºå¯ç”¨å·¥å…·" è¯·æ±‚ â†’ è¿”å› puppeteer å·¥å…·åˆ—è¡¨
 
 å¤§æ¨¡å‹é€‰æ‹©ä¸€ä¸ªå·¥å…·ï¼Œæ¯”å¦‚ puppeteer_navigate
 
 MCP Server æ”¶åˆ° CallTool è¯·æ±‚ â†’ è°ƒç”¨ Puppeteerï¼Œæ§åˆ¶æµè§ˆå™¨æ‰§è¡ŒåŠ¨ä½œ
 
 æŠŠæ‰§è¡Œç»“æœé€šè¿‡ MCP åè®®è¿”å›å¤§æ¨¡å‹
 
 å¯ä»¥è¿ç»­å‘å¤šæ¡æŒ‡ä»¤ï¼Œå¤ç”¨æµè§ˆå™¨ sessionï¼ˆä¸Šä¸‹æ–‡ï¼ï¼‰
 
ğŸš€ é¢å¤–äº®ç‚¹
 å®‰å…¨æ€§æ£€æµ‹ï¼šé˜²æ­¢ç›´æ¥å…è®¸ --no-sandbox ä¹‹ç±»ä¸å®‰å…¨å‚æ•°ï¼Œé™¤éä½ è®¾ç½® allowDangerous: true
 
 ç¯å¢ƒé…ç½®ï¼šæ”¯æŒç”¨ç¯å¢ƒå˜é‡ PUPPETEER_LAUNCH_OPTIONS é…ç½®æµè§ˆå™¨å¯åŠ¨å‚æ•°
 
 è‡ªåŠ¨æ—¥å¿—æ•è·ï¼šé€šè¿‡ override æµè§ˆå™¨çš„ console æ–¹æ³•ï¼ŒæŠŠé¡µé¢çš„ console.log è‡ªåŠ¨æ”¶é›†åˆ° MCPèµ„æºé‡Œ
 
ä½ çš„é—®é¢˜ç›´æ¥å›ç­”ï¼š
 æ€ä¹ˆä¸ªäº‹ï¼Ÿ
 
âœ… è¿™æ˜¯ä¸€ä¸ª MCP Serverï¼Œç”¨ Puppeteer å°è£…äº†ä¸€ç»„æµè§ˆå™¨è‡ªåŠ¨åŒ–æ“ä½œï¼Œ
 âœ… é€šè¿‡ MCPæ ‡å‡†åè®®æŠŠå®ƒä»¬æš´éœ²å‡ºå»ï¼Œè®©å¤§æ¨¡å‹å¯ä»¥è¿œç¨‹æŒ‡æŒ¥æµè§ˆå™¨å¹²æ´»ã€‚
 âœ… ä¸Šä¸‹æ–‡æŒ‡çš„æ˜¯ç»´æŠ¤äº†æµè§ˆå™¨ sessionï¼Œä¸æ˜¯ä¸€æ¡æŒ‡ä»¤å¹²å®Œå°±å…³æ‰ï¼Œè€Œæ˜¯èƒ½è¿ç»­æŒ‡æŒ¥ã€‚

é‚£æˆ‘å¤§æ¦‚æ˜ç™½äº†ï¼Œä½ ä»¬æ˜ç™½äº†å—ï¼Ÿ

reference:For Server Developers - Model Context Protocol 


